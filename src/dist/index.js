'use strict';Object.defineProperty(exports,'__esModule',{value:true});var Ze=require('react'),fiber=require('@react-three/fiber'),drei=require('@react-three/drei'),r=require('three'),jsxRuntime=require('react/jsx-runtime');function _interopDefault(e){return e&&e.__esModule?e:{default:e}}function _interopNamespace(e){if(e&&e.__esModule)return e;var n=Object.create(null);if(e){Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k]}});}})}n.default=e;return Object.freeze(n)}var Ze__default=/*#__PURE__*/_interopDefault(Ze);var r__namespace=/*#__PURE__*/_interopNamespace(r);function He({url:e,isExploded:t,selectedPart:n,onPartSelect:a,onExplodeComplete:s,lightPosition:b,explosionDistance:H,enablePartSelection:A}){let{scene:L}=drei.useGLTF(e),$=Ze.useRef(null),[g,I]=Ze.useState([]),{camera:h,controls:P,gl:F,raycaster:C,pointer:N}=fiber.useThree(),oe=Ze.useRef(false),M=Ze.useRef(null),re=Ze.useRef(new r__namespace.Plane),pe=Ze.useRef(new r__namespace.Vector3),ue=Ze.useRef(false),Y=Ze.useRef(0),Z=Ze.useRef(new r__namespace.Vector3),ie=Ze.useRef(new r__namespace.Vector3),K=Ze.useRef(false),de=Ze.useRef(new r__namespace.Vector3);return Ze.useEffect(()=>{if(!L)return;let m=[],v=(o,T=0)=>{if(o.type==="Scene"){o.children.forEach(u=>v(u,T+1));return}if(o.type==="Group"){let u=o.children.filter(i=>i.type==="Mesh");if(u.length>0){let i=new r__namespace.Box3;i.setFromObject(o);let f=i.getCenter(new r__namespace.Vector3),E=i.getSize(new r__namespace.Vector3),l=Math.max(E.x,E.y,E.z)*.45,w=new r__namespace.Box3().setFromObject(L).getCenter(new r__namespace.Vector3),c=f.clone().sub(w);c.length()<.1&&(c=o.position.length()>.1?o.position.clone().normalize():new r__namespace.Vector3((Math.random()-.5)*2,(Math.random()-.5)*2,(Math.random()-.5)*2)),c.normalize();let V=H+Math.random()*.8+l*1.2,O=o.position.clone().add(c.multiplyScalar(V)),k=null;u.length>0&&u[0]instanceof r__namespace.Mesh&&(k=u[0]),m.push({object:o,originalPosition:o.position.clone(),explodedPosition:O,currentPosition:o.position.clone(),velocity:new r__namespace.Vector3,angularVelocity:new r__namespace.Euler(0,0,0),originalRotation:o.rotation.clone(),name:o.name||`part-${m.length}`,center:f,floatOffset:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*.5,bobSpeed:.2+Math.random()*.2,boundingBox:i.clone(),collisionRadius:l,isDragging:false,collisionMesh:k,grabOffset:new r__namespace.Vector3});return}if(o.children.length>0){o.children.forEach(i=>v(i,T+1));return}}if(o.type==="Mesh"&&o.name&&o.name.length>0){let u=new r__namespace.Box3;u.setFromObject(o);let i=u.getCenter(new r__namespace.Vector3),f=u.getSize(new r__namespace.Vector3),E=Math.max(f.x,f.y,f.z)*.45,x=new r__namespace.Box3().setFromObject(L).getCenter(new r__namespace.Vector3),w=i.clone().sub(x);w.length()<.1&&(w=o.position.length()>.1?o.position.clone().normalize():new r__namespace.Vector3((Math.random()-.5)*2,(Math.random()-.5)*2,(Math.random()-.5)*2)),w.normalize();let c=H*.8+Math.random()*.6+E*1.2,V=o.position.clone().add(w.multiplyScalar(c));m.push({object:o,originalPosition:o.position.clone(),explodedPosition:V,currentPosition:o.position.clone(),velocity:new r__namespace.Vector3,angularVelocity:new r__namespace.Euler(0,0,0),originalRotation:o.rotation.clone(),name:o.name,center:i,floatOffset:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*.5,bobSpeed:.2+Math.random()*.2,boundingBox:u.clone(),collisionRadius:E,isDragging:false,collisionMesh:o instanceof r__namespace.Mesh?o:null,grabOffset:new r__namespace.Vector3});}o.children.forEach(u=>v(u,T+1));};v(L),I(m);},[L,H]),Ze.useEffect(()=>{if(!A)return;let m=F.domElement,v=u=>{ue.current=true,Y.current=Date.now(),K.current=false;let i=m.getBoundingClientRect();N.x=(u.clientX-i.left)/i.width*2-1,N.y=-((u.clientY-i.top)/i.height)*2+1,C.setFromCamera(N,h);let f=C.intersectObjects(L.children,true);if(f.length>0){let E=f[0].object,l=g.find(x=>{let w=E;for(;w;){if(w===x.object)return  true;w=w.parent;}return  false});if(l){u.stopPropagation(),u.preventDefault(),P&&(P.enabled=false);let x=h.position.clone().sub(l.object.position).normalize();re.current.setFromNormalAndCoplanarPoint(x,l.object.position);let w=new r__namespace.Vector3;C.ray.intersectPlane(re.current,w),pe.current.copy(l.object.position).sub(w),ie.current.copy(f[0].point).sub(l.object.position),l.grabOffset.copy(ie.current),Z.current.copy(w),de.current.copy(l.object.position),M.current=l,l.isDragging=true;}}},o=u=>{if(!ue.current||!M.current||(u.stopPropagation(),u.preventDefault(),Date.now()-Y.current<150))return;let f=m.getBoundingClientRect();N.x=(u.clientX-f.left)/f.width*2-1,N.y=-((u.clientY-f.top)/f.height)*2+1,C.setFromCamera(N,h);let E=new r__namespace.Vector3;if(C.ray.intersectPlane(re.current,E)){let l=E.add(pe.current);l.distanceTo(de.current)>.01&&(K.current=true);let x=E.clone().sub(Z.current),w=M.current.grabOffset,c=new r__namespace.Vector3().crossVectors(w,x);M.current.angularVelocity.x+=c.x*2,M.current.angularVelocity.y+=c.y*2,M.current.angularVelocity.z+=c.z*2,Z.current.copy(E),M.current.object.position.copy(l),M.current.currentPosition.copy(l);}},T=u=>{let i=Date.now()-Y.current;if(M.current&&(u.stopPropagation(),u.preventDefault()),i<150&&M.current&&!K.current){let f=M.current;if(a(n===f.name?null:f.name),n!==f.name){let E=new r__namespace.Box3().setFromObject(f.object),l=E.getCenter(new r__namespace.Vector3),x=E.getSize(new r__namespace.Vector3),c=Math.max(x.x,x.y,x.z)*2.5,V=h.position.clone().sub(l).normalize(),O=l.clone().add(V.multiplyScalar(c)),k=h.position.clone(),U=Date.now(),ae=1e3,J=()=>{let B=Date.now()-U,_=Math.min(B/ae,1),Q=1-Math.pow(1-_,3);h.position.lerpVectors(k,O,Q),h.lookAt(l),_<1&&requestAnimationFrame(J);};J();}}ue.current=false,K.current=false,M.current&&(M.current.isDragging=false,M.current=null),P&&(P.enabled=true);};return m.addEventListener("pointerdown",v,true),m.addEventListener("pointermove",o,true),m.addEventListener("pointerup",T,true),m.addEventListener("pointercancel",T,true),()=>{m.removeEventListener("pointerdown",v,true),m.removeEventListener("pointermove",o,true),m.removeEventListener("pointerup",T,true),m.removeEventListener("pointercancel",T,true);}},[g,h,L,F,C,N,P,n,a,A]),Ze.useEffect(()=>{if(!L||g.length===0)return;let m=new r__namespace.Box3;t?g.forEach(E=>{let x=new r__namespace.Box3().setFromObject(E.object).clone();x.translate(E.explodedPosition.clone().sub(E.originalPosition)),m.union(x);}):m.setFromObject(L);let v=m.getSize(new r__namespace.Vector3),o=m.getCenter(new r__namespace.Vector3),T=Math.max(v.x,v.y,v.z),u=h instanceof r__namespace.PerspectiveCamera?h.fov:50,f=T/(2*Math.tan(u*Math.PI/360))*1.8;h.position.set(f,f*.7,f),h.lookAt(o),P&&"target"in P&&(P.target.copy(o),P.update()),h.updateProjectionMatrix();},[L,h,P,g,t]),fiber.useFrame((m,v)=>{if(!$.current||g.length===0)return;let o=true;g.forEach((T,u)=>{let{object:i,originalPosition:f,explodedPosition:E,currentPosition:l,velocity:x,isDragging:w,angularVelocity:c,originalRotation:V}=T;if(w){i.rotation.x+=c.x*v,i.rotation.y+=c.y*v,i.rotation.z+=c.z*v,c.x*=.95,c.y*=.95,c.z*=.95;return}let O=t?E:f,k=l.distanceTo(O),U=8;k>.01&&(o=false);let ae=Math.min(k/U,1)*.008,J=O.clone().sub(l).multiplyScalar(ae);if(x.add(J),g.forEach((B,_)=>{if(u===_||B.isDragging)return;let Q=l.distanceTo(B.currentPosition),ge=T.collisionRadius+B.collisionRadius;if(Q<ge*1.1){let R=T.boundingBox.clone();R.translate(l.clone().sub(T.originalPosition));let z=B.boundingBox.clone();if(z.translate(B.currentPosition.clone().sub(B.originalPosition)),R.intersectsBox(z)){let G=l.clone().sub(B.currentPosition).normalize(),ee=ge-Q,me=G.multiplyScalar(ee*.08),se=x.clone().sub(B.velocity).dot(G);if(se<0){let d=G.multiplyScalar(se*.5);x.sub(d);}x.add(me);}}}),l.add(x),x.multiplyScalar(.92),i.position.copy(l),t){let B=Math.sin(m.clock.elapsedTime*T.bobSpeed+T.floatOffset)*.03;i.position.y+=B*v*5,i.rotation.x+=c.x*v+T.rotationSpeed*.3*v,i.rotation.y+=c.y*v+T.rotationSpeed*v,i.rotation.z+=c.z*v+T.rotationSpeed*.2*v,c.x*=.98,c.y*=.98,c.z*=.98;}else i.rotation.x+=(V.x-i.rotation.x)*.1,i.rotation.y+=(V.y-i.rotation.y)*.1,i.rotation.z+=(V.z-i.rotation.z)*.1,c.x*=.9,c.y*=.9,c.z*=.9;}),o&&t&&!oe.current?(oe.current=true,s?.()):t||(oe.current=false);}),jsxRuntime.jsx("group",{ref:$,children:jsxRuntime.jsx("primitive",{object:L})})}function ke(){return null}function we({modelUrl:e,backgroundColor:t="#000000",ambientLightIntensity:n=.3,directionalLightIntensity:a=1.2,shadowsEnabled:s=true,cameraFov:b=50,cameraPosition:H=[5,5,5],explosionDistance:A=1.5,explosionSpeed:L=800,animationEasing:$="easeInOut",showUploadUI:g=true,showControls:I=true,autoExplode:h=false,enablePartSelection:P=true,enableLightControl:F=true,enableRotate:C=true,enableZoom:N=true,enablePan:oe=true,minDistance:M=2,maxDistance:re=20,onLoad:pe,onLoadError:ue,onExplode:Y,onAssemble:Z,onPartSelect:ie,className:K,containerStyle:de}){let[m,v]=Ze.useState(e||null),[o,T]=Ze.useState(h),[u,i]=Ze.useState(null),[f,E]=Ze.useState(false),[l,x]=Ze.useState(new r__namespace.Vector3(10,10,5)),w=Ze.useRef(null),c=Ze.useRef(null),V=Ze.useRef(false),O=Ze.useRef(false),k=Ze.useRef(null);Ze.useEffect(()=>{e&&v(e);},[e]),Ze.useEffect(()=>{if(!F)return;let R=d=>{if(d.touches.length===3){V.current=true;let j=d.touches[0];c.current={x:j.clientX,y:j.clientY},d.preventDefault();}},z=d=>{if(d.touches.length===3&&V.current&&c.current){let j=d.touches[0],be=(j.clientX-c.current.x)*.05,he=(j.clientY-c.current.y)*.05;x(le=>{let Ee=le.clone();return Ee.x+=be,Ee.y-=he,Ee}),c.current={x:j.clientX,y:j.clientY},d.preventDefault();}},G=d=>{d.touches.length<3&&(V.current=false,c.current=null);},ee=d=>{d.button===2&&(O.current=true,k.current={x:d.clientX,y:d.clientY},d.preventDefault(),d.stopPropagation());},me=d=>{if(O.current&&k.current){let j=(d.clientX-k.current.x)*.05,be=(d.clientY-k.current.y)*.05;x(he=>{let le=he.clone();return le.x+=j,le.y-=be,le}),k.current={x:d.clientX,y:d.clientY},d.preventDefault(),d.stopPropagation();}},fe=d=>{d.button===2&&O.current&&(O.current=false,k.current=null,d.preventDefault(),d.stopPropagation());},se=d=>{d.preventDefault();};return window.addEventListener("touchstart",R,{passive:false}),window.addEventListener("touchmove",z,{passive:false}),window.addEventListener("touchend",G),window.addEventListener("mousedown",ee,true),window.addEventListener("mousemove",me,true),window.addEventListener("mouseup",fe,true),window.addEventListener("contextmenu",se),()=>{window.removeEventListener("touchstart",R),window.removeEventListener("touchmove",z),window.removeEventListener("touchend",G),window.removeEventListener("mousedown",ee,true),window.removeEventListener("mousemove",me,true),window.removeEventListener("mouseup",fe,true),window.removeEventListener("contextmenu",se);}},[F]);let U=Ze.useCallback(R=>{if(R&&R.name.toLowerCase().endsWith(".glb")){m&&URL.revokeObjectURL(m);let z=URL.createObjectURL(R);v(z),T(h),i(null);}},[m,h]),ae=Ze.useCallback(R=>{let z=R.target.files?.[0];z&&U(z);},[U]),J=Ze.useCallback(R=>{R.preventDefault(),E(true);},[]),B=Ze.useCallback(R=>{R.preventDefault(),E(false);},[]),_=Ze.useCallback(R=>{R.preventDefault(),E(false);let G=Array.from(R.dataTransfer.files).find(ee=>ee.name.toLowerCase().endsWith(".glb"));G&&U(G);},[U]),Q=Ze.useCallback(()=>{let R=!o;T(R),R?Y?.():Z?.();},[o,Y,Z]),ge=Ze.useCallback(R=>{i(R),ie?.(R);},[ie]);return jsxRuntime.jsxs("div",{className:K||"h-screen w-screen",style:{...de,backgroundColor:t,position:"relative",overflow:"hidden"},onDragOver:g?J:void 0,onDragLeave:g?B:void 0,onDrop:g?_:void 0,children:[g&&f&&jsxRuntime.jsx("div",{className:"absolute inset-0 bg-white/10 border-2 border-dashed border-white z-50 flex items-center justify-center",children:jsxRuntime.jsx("div",{className:"text-2xl font-bold text-white",children:"Drop GLB file to load"})}),g&&jsxRuntime.jsx("input",{ref:w,type:"file",accept:".glb",onChange:ae,className:"hidden"}),!m&&g?jsxRuntime.jsx("div",{className:"flex items-center justify-center h-full w-full",children:jsxRuntime.jsx("div",{className:"w-full h-full flex items-center justify-center cursor-pointer hover:bg-white/5 transition-colors",onClick:()=>w.current?.click(),children:jsxRuntime.jsxs("div",{className:"text-center",children:[jsxRuntime.jsx("svg",{className:"w-20 h-20 mx-auto mb-4 text-white/50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntime.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),jsxRuntime.jsx("p",{className:"text-xl text-white/70 mb-2",children:"Upload a 3D Model"}),jsxRuntime.jsx("p",{className:"text-sm text-white/50",children:"GLB format supported"})]})})}):m?jsxRuntime.jsxs("div",{className:"h-full w-full relative",children:[jsxRuntime.jsxs(fiber.Canvas,{camera:{position:H,fov:b},gl:{antialias:true,alpha:false},shadows:s,children:[jsxRuntime.jsx(drei.Environment,{preset:"studio"}),jsxRuntime.jsx("ambientLight",{intensity:n}),jsxRuntime.jsx("directionalLight",{position:[l.x,l.y,l.z],intensity:a,castShadow:s,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048}),jsxRuntime.jsx("directionalLight",{position:[-10,-10,-5],intensity:.4}),jsxRuntime.jsx("spotLight",{position:[0,10,0],intensity:.5,angle:.6,penumbra:1,castShadow:s}),jsxRuntime.jsx(Ze.Suspense,{fallback:jsxRuntime.jsx(ke,{}),children:jsxRuntime.jsx(He,{url:m,isExploded:o,selectedPart:u,onPartSelect:ge,onExplodeComplete:Y,lightPosition:l,explosionDistance:A,enablePartSelection:P})}),jsxRuntime.jsx(drei.OrbitControls,{enablePan:oe,enableZoom:N,enableRotate:C,minDistance:M,maxDistance:re})]}),I&&jsxRuntime.jsx(jsxRuntime.Fragment,{children:jsxRuntime.jsx("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 z-10",children:jsxRuntime.jsxs("div",{className:"flex items-center gap-2 bg-black/50 backdrop-blur-sm border border-white/20 rounded-full px-4 py-2",children:[g&&jsxRuntime.jsxs(jsxRuntime.Fragment,{children:[jsxRuntime.jsx("button",{onClick:()=>w.current?.click(),className:"p-2 rounded-full text-white hover:bg-white/20 transition-colors",title:"Upload new model",children:jsxRuntime.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntime.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),jsxRuntime.jsx("div",{className:"w-px h-6 bg-white/20"})]}),jsxRuntime.jsx("button",{onClick:Q,className:`p-2 rounded-full text-white transition-colors ${o?"bg-white/20":"hover:bg-white/20"}`,title:o?"Assemble":"Explode",children:jsxRuntime.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntime.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]})})})]}):null]})}var Be=we;function Ve(){let[e,t]=Ze.useState(false),[n,a]=Ze.useState(null),[s,b]=Ze.useState(false),[H,A]=Ze.useState(null),[L,$]=Ze.useState([]),g=Ze.useCallback(()=>{t(true);},[]),I=Ze.useCallback(()=>{t(false);},[]),h=Ze.useCallback(()=>{t(C=>!C);},[]),P=Ze.useCallback(C=>{a(C);},[]),F=Ze.useCallback(()=>{A(null);},[]);return {isExploded:e,selectedPart:n,isLoading:s,error:H,parts:L,explode:g,assemble:I,toggleExplode:h,selectPart:P,setIsLoading:b,setError:A,setParts:$,clearError:F}}function Oe(){let e=Ze.useRef(null),t={explode:Ze.useCallback(()=>e.current?.explode(),[]),assemble:Ze.useCallback(()=>e.current?.assemble(),[]),toggle:Ze.useCallback(()=>e.current?.toggleExplode(),[]),selectPart:Ze.useCallback(n=>e.current?.selectPart(n),[]),resetCamera:Ze.useCallback(()=>e.current?.resetCamera(),[])};return [e,t]}function ze(e,t){Ze.useEffect(()=>{let n=a=>{let s=a.key.toLowerCase();e.explode&&s===e.explode.toLowerCase()?(a.preventDefault(),t.onExplode?.()):e.assemble&&s===e.assemble.toLowerCase()?(a.preventDefault(),t.onAssemble?.()):e.toggle&&s===e.toggle.toLowerCase()?(a.preventDefault(),t.onToggle?.()):e.resetCamera&&s===e.resetCamera.toLowerCase()&&(a.preventDefault(),t.onResetCamera?.());};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[e,t]);}function Ie(e,t){let[n,a]=Ze.useState(false),[s,b]=Ze.useState(null),H=Ze.useCallback(g=>{b(null);let I=t?.maxSize||100*1024*1024;if(g.size>I){b(`File too large. Maximum size is ${I/1024/1024}MB`);return}let h=t?.allowedExtensions||[".glb"],P=g.name.toLowerCase();if(!h.some(C=>P.endsWith(C))){b(`Invalid file format. Allowed: ${h.join(", ")}`);return}e(g);},[e,t]),A=Ze.useCallback(g=>{g.preventDefault(),a(true);},[]),L=Ze.useCallback(g=>{g.preventDefault(),a(false);},[]),$=Ze.useCallback(g=>{g.preventDefault(),a(false);let I=Array.from(g.dataTransfer.files),h=t?.allowedExtensions||[".glb"],P=I.find(F=>h.some(C=>F.name.toLowerCase().endsWith(C)));P?H(P):b(`No valid file found. Allowed: ${h.join(", ")}`);},[H,t]);return {isDragging:n,error:s,handleFileSelect:H,handleDragOver:A,handleDragLeave:L,handleDrop:$,clearError:()=>b(null)}}function Fe(e,t=[]){let n=Ze.useRef(void 0),a=Ze.useRef(void 0),s=Ze.useCallback(b=>{if(a.current!==void 0){let H=b-a.current;e(H);}a.current=b,n.current=requestAnimationFrame(s);},[e]);Ze.useEffect(()=>(n.current=requestAnimationFrame(s),()=>{n.current&&cancelAnimationFrame(n.current);}),[s]);}function Ae(e,t){let[n,a]=Ze.useState(()=>{try{let b=window.localStorage.getItem(e);return b?JSON.parse(b):t}catch(b){return console.warn(`Error loading ${e} from localStorage:`,b),t}}),s=Ze.useCallback(b=>{try{a(b),window.localStorage.setItem(e,JSON.stringify(b));}catch(H){console.warn(`Error saving ${e} to localStorage:`,H);}},[e]);return [n,s]}var Ne={linear:e=>e,easeIn:e=>e*e*e,easeOut:e=>1-Math.pow(1-e,3),easeInOut:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,bounce:e=>e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375};function Ge(){return `${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function je(e,t,n){return Math.min(Math.max(e,t),n)}function We(e,t,n){return e+(t-e)*n}function Ue(e){let t=[];return e.explosionDistance!==void 0&&e.explosionDistance<0&&t.push("explosionDistance should be positive"),e.explosionSpeed!==void 0&&e.explosionSpeed<100&&t.push("explosionSpeed should be at least 100ms for smooth animations"),e.minDistance!==void 0&&e.maxDistance!==void 0&&e.minDistance>=e.maxDistance&&t.push("minDistance should be less than maxDistance"),e.ambientLightIntensity!==void 0&&e.ambientLightIntensity<0&&t.push("ambientLightIntensity should be non-negative"),e.directionalLightIntensity!==void 0&&e.directionalLightIntensity<0&&t.push("directionalLightIntensity should be non-negative"),{valid:t.length===0,warnings:t}}function Xe(e){let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16)/255,g:parseInt(t[2],16)/255,b:parseInt(t[3],16)/255}:null}function $e(e,t,n){return "#"+[e,t,n].map(a=>{let s=Math.round(a*255).toString(16);return s.length===1?"0"+s:s}).join("")}function Ye(e){if(!e)return {valid:false,error:"No file provided"};let t=[".glb"],n=e.name.toLowerCase();if(!t.some(b=>n.endsWith(b)))return {valid:false,error:"Invalid file format. Please upload a .glb file"};let s=100*1024*1024;return e.size>s?{valid:false,error:"File too large. Maximum size is 100MB"}:{valid:true}}var xe=class{constructor(){this.frameCount=0;this.lastTime=performance.now();this.fps=60;}update(){this.frameCount++;let t=performance.now(),n=t-this.lastTime;return n>=1e3&&(this.fps=Math.round(this.frameCount*1e3/n),this.frameCount=0,this.lastTime=t),this.fps}getFPS(){return this.fps}},qe={save(e,t){try{localStorage.setItem(e,JSON.stringify(t));}catch(n){console.warn("Failed to save to localStorage:",n);}},load(e,t){try{let n=localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.warn("Failed to load from localStorage:",n),t}},remove(e){try{localStorage.removeItem(e);}catch(t){console.warn("Failed to remove from localStorage:",t);}}};function Ke({progress:e,message:t}){return jsxRuntime.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",fontFamily:"system-ui, -apple-system, sans-serif",zIndex:1e3},children:[jsxRuntime.jsx("div",{style:{width:50,height:50,border:"3px solid rgba(255, 255, 255, 0.1)",borderTop:"3px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),t&&jsxRuntime.jsx("p",{style:{marginTop:20,fontSize:14,opacity:.8},children:t}),e!==void 0&&jsxRuntime.jsxs("div",{style:{marginTop:15,width:200},children:[jsxRuntime.jsx("div",{style:{width:"100%",height:4,backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:2,overflow:"hidden"},children:jsxRuntime.jsx("div",{style:{width:`${e}%`,height:"100%",backgroundColor:"white",transition:"width 0.3s ease"}})}),jsxRuntime.jsxs("p",{style:{marginTop:8,fontSize:12,opacity:.6,textAlign:"center"},children:[Math.round(e),"%"]})]}),jsxRuntime.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})}function Je({error:e,onRetry:t,onDismiss:n}){return jsxRuntime.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.9)",color:"white",fontFamily:"system-ui, -apple-system, sans-serif",padding:20,zIndex:1e3},children:[jsxRuntime.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginBottom:20,color:"#ef4444"},children:[jsxRuntime.jsx("circle",{cx:"12",cy:"12",r:"10"}),jsxRuntime.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),jsxRuntime.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),jsxRuntime.jsx("h3",{style:{margin:0,marginBottom:10,fontSize:18,fontWeight:600},children:"Failed to Load Model"}),jsxRuntime.jsx("p",{style:{margin:0,marginBottom:20,fontSize:14,opacity:.7,maxWidth:400,textAlign:"center"},children:e.message||"An unexpected error occurred while loading the 3D model."}),jsxRuntime.jsxs("div",{style:{display:"flex",gap:10},children:[t&&jsxRuntime.jsx("button",{onClick:t,style:{padding:"10px 20px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:6,fontSize:14,fontWeight:500,cursor:"pointer",transition:"background-color 0.2s"},onMouseEnter:a=>{a.currentTarget.style.backgroundColor="#2563eb";},onMouseLeave:a=>{a.currentTarget.style.backgroundColor="#3b82f6";},children:"Try Again"}),n&&jsxRuntime.jsx("button",{onClick:n,style:{padding:"10px 20px",backgroundColor:"rgba(255, 255, 255, 0.1)",color:"white",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:6,fontSize:14,fontWeight:500,cursor:"pointer",transition:"background-color 0.2s"},onMouseEnter:a=>{a.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)";},onMouseLeave:a=>{a.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)";},children:"Dismiss"})]})]})}function _e({onFileSelect:e,isDragging:t}){let n=Ze__default.default.useRef(null);return jsxRuntime.jsxs("div",{onClick:()=>n.current?.click(),style:{position:"absolute",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"background-color 0.2s",backgroundColor:t?"rgba(255, 255, 255, 0.05)":"transparent"},children:[jsxRuntime.jsx("input",{ref:n,type:"file",accept:".glb",onChange:s=>{let b=s.target.files?.[0];b&&e(b);},style:{display:"none"}}),jsxRuntime.jsx("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",style:{marginBottom:20,color:"rgba(255, 255, 255, 0.5)",transition:"transform 0.2s",transform:t?"scale(1.1)":"scale(1)"},children:jsxRuntime.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),jsxRuntime.jsx("h3",{style:{margin:0,marginBottom:8,fontSize:20,fontWeight:600,color:"rgba(255, 255, 255, 0.9)"},children:t?"Drop to Upload":"Upload 3D Model"}),jsxRuntime.jsx("p",{style:{margin:0,fontSize:14,color:"rgba(255, 255, 255, 0.5)"},children:t?"Release to load":"Click or drag GLB file here"})]})}function Qe({isExploded:e,onExplode:t,onUpload:n,showUploadButton:a}){return jsxRuntime.jsx("div",{style:{position:"absolute",bottom:24,left:"50%",transform:"translateX(-50%)",zIndex:10},children:jsxRuntime.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:9999,padding:"8px 16px"},children:[a&&n&&jsxRuntime.jsxs(jsxRuntime.Fragment,{children:[jsxRuntime.jsx("button",{onClick:n,title:"Upload new model",style:{padding:8,backgroundColor:"transparent",border:"none",borderRadius:9999,color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:s=>{s.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.2)";},onMouseLeave:s=>{s.currentTarget.style.backgroundColor="transparent";},children:jsxRuntime.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntime.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),jsxRuntime.jsx("div",{style:{width:1,height:24,backgroundColor:"rgba(255, 255, 255, 0.2)"}})]}),jsxRuntime.jsx("button",{onClick:t,title:e?"Assemble":"Explode",style:{padding:8,backgroundColor:e?"rgba(255, 255, 255, 0.2)":"transparent",border:"none",borderRadius:9999,color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:s=>{e||(s.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.2)");},onMouseLeave:s=>{e||(s.currentTarget.style.backgroundColor="transparent");},children:jsxRuntime.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntime.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]})})}var tt={gentle:{distance:1,speed:1200,easing:"easeOut",staggerDelay:20},normal:{distance:1.5,speed:800,easing:"easeInOut",staggerDelay:15},energetic:{distance:2.5,speed:600,easing:"easeOut",staggerDelay:10},dramatic:{distance:3.5,speed:1500,easing:"bounce",staggerDelay:30},custom:{}};exports.ANIMATION_PRESETS=tt;exports.BreakGLB=we;exports.ControlPanel=Qe;exports.ErrorDisplay=Je;exports.LoadingFallback=Ke;exports.PerformanceMonitor=xe;exports.UploadZone=_e;exports.clamp=je;exports.default=Be;exports.easingFunctions=Ne;exports.generateUniqueId=Ge;exports.hexToRgb=Xe;exports.lerp=We;exports.rgbToHex=$e;exports.storage=qe;exports.useAnimationFrame=Fe;exports.useBreakGLB=Ve;exports.useFileUpload=Ie;exports.useKeyboardShortcuts=ze;exports.useLocalStorage=Ae;exports.useModelControls=Oe;exports.validateGLBFile=Ye;exports.validateProps=Ue;//# sourceMappingURL=index.js.map
//# sourceMappingURL=index.js.map